# poc for finctional reactive program evaluation

The "program" is a graph where a node is executed when there was any change on the input.
In the POC:
- all node has 2 f64 input and 1 f64 output.
- the "native" nodes perform one of +,-,*,min,max,avg operation
- the wasm is a brute fore, all node store the whole wasm instance with its store, etc. The script is the same: (a+b)+1, jsut a quik check for wasm interop "cost"
- edges and nodes are generated by random (output is not important now) but the graph is a DAG in all case

Runing:
- test: `cargo test`
- benchmark: `cargo bench --test frp_stress -- --nocapture`

to check the dot: 
- <https://graphviz.org/download/>
- save the output into some file
- `dot -Tps filename.dot -o outfile.ps -v`
- waaaaaait 1-2hour, maybe day depending on the size :)


Some results (on my office computer whatever it is)

```
node: 10000
script node: 966
input edge count: 373
edge count: 19627
test bench_run ... bench:   1,396,535 ns/iter (+/- 575,711)
```

```
node: 10000
script node: 7066
input edge count: 401
edge count: 19599
test bench_run ... bench:   6,456,465 ns/iter (+/- 1,749,424)
```

```
node: 100000
script node: 9867
input edge count: 3963
edge count: 196037
test bench_run ... bench:  32,872,370 ns/iter (+/- 13,471,371)
```

```
node: 100000
script node: 70109
input edge count: 4059
edge count: 195941
test bench_run ... bench:  77,265,230 ns/iter (+/- 26,184,327)
```
